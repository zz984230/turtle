# 项目路线图与实施计划（A股投研与资产管理系统）

## 概述
- 目标：构建“数据采集（结构化+文本） + 市场温度 + 风险平价资产配置 + 风控 + 大模型投研 + 回测 + 仪表盘 + 自动化 + 备份回滚 + 测试”的一体化系统。
- 现有对接：
  - 债券数据抓取与缓存：`d:\\code\\turtle\\app\\bond\\bond_data.py:7`, `d:\\code\\turtle\\app\\bond\\bond_data.py:49`
  - 海龟策略示例：`d:\\code\\turtle\\app\\turtle_algo\\turtle_strategy.py:5`, `d:\\code\\turtle\\app\\turtle_algo\\turtle_strategy.py:47`, `d:\\code\\turtle\\app\\turtle_algo\\turtle_strategy.py:72`
  - CLI入口：`d:\\code\\turtle\\main.py:6`

## 文档清单
- 架构文档：docs/architecture.md
- 路线图：docs/roadmap.md（本文件）
- 数据采集：docs/data-ingest.md（后续创建）
- 市场温度：docs/market-temperature.md（后续创建）
- 策略与风控：docs/strategies-risk.md（后续创建）
- 大模型集成：docs/llm-integration.md（后续创建）
- 回测设计：docs/backtest.md（后续创建）
- 仪表盘：docs/dashboard.md（后续创建）
- 自动化与备份：docs/scheduler-backup.md（后续创建）
- 测试与验证：docs/testing.md（后续创建）
- 安全合规：docs/security.md（后续创建）

## 核心功能范围
- 数据采集：akshare实时与历史、行业资金流、融资融券、涨停池；政府/交易所公告与主流媒体新闻爬取
- 预处理：结构化字段规范、缺失与异常策略；文本去噪、分段、标签、关键词与情感
- 市场温度：成交量变化、融资融券余额变化、涨停占比、波动率；归一化与平滑
- 策略：风险平价权重、动态再平衡、止损止盈；联动市场温度
- 风控：最大回撤阈值、目标波动控制、交易保护
- LLM投研：GPT-4/Claude连接器，技术+消息融合输入，建议报告与风险评估
- 回测：多周期回测、交易日志与复现；绩效指标与参数优化
- 仪表盘：技术面/消息面/建议/回测展示，响应式与下载报表
- 自动化：每日收盘后流程；备份归档与回滚
- 合规安全：密钥与敏感数据加密、访问控制、日志脱敏

## 里程碑与迭代任务

### Phase 1（2周）：采集与清洗、缓存与存储、备份回滚
- 迭代1（1周）
  - 结构化数据接口封装：指数/资金流/涨停池/融资融券
  - Parquet分区与`meta.json`；异常重试与基础日志
  - 交付物：数据样例、缓存命中率报告、接口可靠性日志
- 迭代2（1周）
  - 文本爬虫与清洗（公告/新闻，标签/关键词/情感初版）
  - 备份与回滚原型（指定目录全量备份与回滚）
  - 交付物：文本样例与清洗质量报告；备份包与`manifest.json`

### Phase 2（2周）：市场温度、风险平价与风控
- 迭代1（1周）
  - 温度计算（归一化、EWMA平滑、异常拦截）
  - 风险平价权重生成（逆波动、约束与目标波动）
  - 交付物：温度时间序列与权重示例，回测准备数据
- 迭代2（1周）
  - 再平衡与风控（最大回撤/目标波动/止损止盈）
  - 调仓日志与联动接口（温度→再平衡）
  - 交付物：策略示例与联动演示、风控触发记录

### Phase 3（3周）：LLM投研、仪表盘与自动化
- 迭代1（1周）
  - GPT-4/Claude连接器与提示模板；输入管道整合（技术+消息）
  - 交付物：建议报告样例与置信度、日志脱敏验证
- 迭代2（1周）
  - 仪表盘（技术/消息/建议模块）；响应式布局与联动
  - 交付物：可交互界面与数据联动演示
- 迭代3（1周）
  - 每日自动任务（收盘后流程）
  - 反馈机制与提示优化闭环
  - 交付物：自动化运行日志与优化效果评估

### Phase 4（2周）：≥5年回测、蒙特卡洛、测试套件与绩效报告
- 迭代1（1周）
  - 回测引擎（多周期、交易日志与复现）；绩效指标计算
  - 蒙特卡洛模拟（VaR/CVaR与稳健性评估）
  - 交付物：净值/资金曲线、指标汇总与模拟报告
- 迭代2（1周）
  - 单元与集成测试覆盖；报表下载与对比测试
  - 交付物：测试覆盖率与CI报告、统计报表导出

## 验收标准
- 采集稳定性（成功率、延迟、重试）与缓存命中率
- 温度/策略联动效果与风控边界满足（最大回撤/目标波动）
- LLM建议质量（解释性与后验偏差）与安全合规
- 回测完整性（复现性、日志、指标）与参数优化对比
- 仪表盘交互与响应式体验、报表导出
- 备份与回滚成功率与可审计性

## 风险与缓解
- 数据源接口变更：多源备选与监控；快速修复预案
- 文本源反爬：UA池/节流/代理；频率管理
- LLM API配额：限流与重试、离线回退
- 安全合规：密钥与敏感数据加密；访问控制与审计