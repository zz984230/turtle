# Turtle 项目

## 项目概述

Turtle 项目旨在实现经典的海龟交易法（Turtle Trading System），并将其应用于可转债、股票和ETF等资产。该系统基于趋势跟踪策略，包括进入规则、退出规则、仓位管理和风险控制。通过Python实现，支持数据获取、策略回测和实际应用。

## 项目框架

项目采用模块化设计，分为以下主要模块：
- **数据模块**：负责从AKShare获取可转债、股票和ETF的历史数据和实时数据。
- **策略模块**：实现海龟交易法的核心逻辑，包括唐奇安通道计算、ATR风险评估、进入/退出信号生成。
- **回测模块**：模拟历史数据上的交易策略，评估性能指标（如收益率、最大回撤、夏普比率）。
- **应用模块**：将策略应用于不同资产类型，支持实时监控和交易执行。
- **工具模块**：辅助函数，如数据清洗、图表可视化。

项目使用Python作为主要语言，依赖库包括Pandas、NumPy、TA-Lib（用于技术指标）、Backtrader或Zipline（用于回测）、AKShare（用于数据获取）。

## 代码结构

项目目录结构如下：
- `app/`：核心应用代码
  - `bond/`：可转债相关模块
  - `stock/`：股票相关模块
  - `etf/`：ETF相关模块
  - `turtle_algo/`：海龟交易算法实现
- `demo/`：示例脚本和演示
  - `bond/`：可转债演示
  - 示例脚本如`bond_analyzer.py`、`bond_utils.py`
- `main.py`：项目入口文件，用于运行策略或回测
- `pyproject.toml`：依赖管理和项目配置
- `README.md`：项目文档
- `requirements.txt` 或使用Poetry管理依赖

## 具体的实现逻辑

### 1. 数据获取
- 使用AKShare获取资产数据：OHLCV（开高低收成交量）。
- 支持资产类型：可转债（bond）、股票（stock）、ETF。
- 实现数据缓存和更新机制，避免重复请求。

### 2. 海龟交易法核心逻辑
- **进入规则**：
  - 系统1：20日突破买入（短期）。
  - 系统2：55日突破买入（长期）。
- **退出规则**：
  - 系统1：10日低点卖出。
  - 系统2：20日低点卖出。
- **仓位管理**：
  - 使用ATR（平均真实波动范围）计算单位大小。
  - 风险控制：每个交易风险不超过账户的1%。
- **加仓**：在趋势持续时，按ATR间隔加仓，最多4个单位。

### 3. 应用于不同资产
- **可转债**：考虑转股价格、到期收益率等特殊因素，调整波动性计算。
- **股票**：标准应用，关注流动性。
- **ETF**：类似股票，但考虑跟踪指数的特性。

### 4. 回测和执行
- 使用Backtrader框架实现回测，支持多资产组合。
- 实时应用：集成实时数据源，生成交易信号。

## 使用说明
- 安装依赖：`pip install -r requirements.txt` 或 `poetry install`。
- 运行示例：`python main.py --asset bond --mode backtest`。
- 配置：AKShare无需特殊API密钥，但确保安装正确。

## 未来计划
- 添加实时交易接口。
- 优化策略参数。
- 支持更多资产类型。
